monitorv2 {
  output = HDMI-A-2
  mode = 3840x2160@120
  position = auto
  scale = 1
  bitdepth = 10
  vrr = 3
  supports_wide_color = 1
  supports_hdr = 1
  # cm = hdr # Auto results in some strange colors, hdr works just fine
  # cm = auto
}

# gpd
monitorv2 {
  output = eDP-1
  mode = 2560x1600@60
  position = auto
  scale = 1 # 1.33
}

monitor = desc:Lenovo Group Limited LEN G34w-10 UGW0394A, 3440x1440@144, 0x0, 1, vrr, 0, bitdepth, 10

#TODO: create a script to automate enabling and disabling steam deck/gpd screen based on current output
# monitor = eDP-1, disable


bindl = , switch:on:Lid Switch, exec, hyprctl keyword monitor "eDP-1, disable"
bindl = , switch:off:Lid Switch, exec, hyprctl keyword monitor "eDP-1, preffered, auto, 1.33, bitdepth=10"

# --- Rules for when monitors are connected/disconnected ---

# # When an external monitor is added (e.g., DP-1)
# bindm=,monitoradded,exec,if [[ "$(hyprctl monitors all | grep 'HDMI-A-1 (active)')" ]]; then hyprctl keyword monitor "eDP-1,disable" && hyprctl keyword monitor "DP-1,preferred,0x0,1"; fi
#
# # When the external monitor is removed
# bindm=,monitorremoved,exec,if [[ ! "$(hyprctl monitors all | grep 'HDMI-A-1 (active)')" ]]; then hyprctl keyword monitor "eDP-1,preferred,0x0,1" && hyprctl keyword monitor "DP-1,disable"; fi

# Execute the monitor setup script on Hyprland startup
# exec-once = ~/.config/hypr/scripts/monitor_setup.sh
#
# # Re-run the script whenever a monitor is added or removed
# # This triggers the script to re-evaluate the connected monitors and apply the correct state.
# bindm=,monitoradded,exec,~/.config/hypr/scripts/monitor_setup.sh
# bindm=,monitorremoved,exec,~/.config/hypr/scripts/monitor_setup.sh
